!function(e){jQuery.fn.jqElGrid=function(t){var t=e.extend({child:".item",elSize:200,elPadding:5,rowsShow:9999,hidedClass:"jqElGrid-hided",waitTime:250,oneColumnHeight:.6,prioAttr:"prio",columns:0},t),n={selector:null,parentSize:0,columns:0},i=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},o=function(){var e=null;return function(t,n){e&&clearTimeout(e),e=setTimeout(t,n)}}(),r=function(){var o=[],r=[],l=[];for(e(n.selector+" "+t.child).each(function(n){var i=e(this).data(t.prioAttr);"undefined"!=typeof i&&0!=i?o.push({elIndex:n,prio:i}):l.push(n)}),o.sort(function(e,t){return e.prio<t.prio?1:e.prio>t.prio?-1:0}),e.each(o,function(){this.prio>0&&r.push(this.elIndex)});l.length>0;){var c=i(0,l.length-1);r.push(l[c]),l=l.filter(function(e,t){return t!=c})}return e.each(o,function(){this.prio<0&&r.push(this.elIndex)}),r},l=function(i){for(var o=e(n.selector+" "+t.child).length,r=[],l=0;o>l;)-1!=i.indexOf(l)&&r.push(l),r.push(l),l+=1;return r},c=function(e){for(var t=!0,i=l(e),o=0;o<e.length;o++){var r=i.indexOf(e[o])+1;if(r%n.columns==0){t=!1;break}}return t},s=function(){var i=r(),o=e(n.selector+" "+t.child).length;o=n.columns-o%n.columns;for(var l=[],s=null;l.length<o;){null===s&&(s=0),s>i.length&&(i=r(),l=[],s=0);for(var h=0;h<i.length;h++){var u=l.concat();if(u=u.concat([i[h]]),c(u)&&-1==l.indexOf(i[h])){l.push(i[h]),s=0;break}s+=1}}return l},h=function(i){var o=100/n.columns;e(n.selector+" "+t.child).css({"float":"left",width:o+"%"});var r=e(n.selector+" "+t.child).width();1==n.columns&&(r*=t.oneColumnHeight),e(n.selector+" "+t.child).css("height",r),e.each(i,function(){e(n.selector+" "+t.child).eq(this).width(2*o+"%")})},u=function(){var i=t.elPadding/n.parentSize*100;i=i.toFixed(6);var o=100;e(n.selector+" "+t.child).each(function(){var n=parseFloat(e(this)[0].style.width);o-=n,0!=o.toFixed(6)&&e(this).width(n-i+"%"),e(this).css({"margin-right":i+"%","margin-bottom":t.elPadding}),0==o.toFixed(6)&&(e(this).css("margin-right",0),o=100)})},a=function(){var i=1,o=null,r=t.rowsShow;e(n.selector+" "+t.child).show(),e(n.selector+" "+t.child).each(function(){null!==o&&e(this).offset().top!=o&&(i+=1),o=e(this).offset().top,r>0&&i>r&&e(this).hide().addClass(t.hidedClass)})},d=function(){var i=e(n.selector).data("columns");n.columns="undefined"!=typeof i&&0!=i?i:t.columns>0?t.columns:~~(n.parentSize/t.elSize);var o=[];n.columns>1&&(o=s()),h(o),u(),a()};n.selector=e(this).selector;var f=e(n.selector+" "+t.child).length;f>0&&(e(n.selector+" "+t.child)&&e(n.selector).append('<span style="clear:both"></span>'),n.parentSize=e(this).width(),d(),e(window).resize(function(){o(function(){n.parentSize=e(this).width(),d()},t.waitTime)}))}}(jQuery);